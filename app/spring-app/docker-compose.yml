version: '3'
services:

  verification-context-mongo-db:
    image: mongo:latest
    container_name: verification-context-mongo-db
    ports:
      - 27018:27017

  verification-context-dynamo-db:
    image: amazon/dynamodb-local:latest
    container_name: verification-context-dynamo-db
    ports:
      - 8001:8000

  verification-context-app:
    image: michaelruocco/verification-context-spring-app
    container_name: verification-context-app
    ports:
      - 8081:80
    environment:
      - SPRING_PROFILES_ACTIVE=default
      - SERVER_PORT=80
      - MONGO_CONNECTION_STRING=mongodb://verification-context-mongo-db:27017/verification-context
      - AWS_ACCESS_KEY=abc
      - AWS_SECRET_KEY=123
      - DYNAMO_DB_URI=http://verification-context-dynamo-db:8000
    depends_on:
      - verification-context-mongo-db
      - verification-context-dynamo-db